"use strict";(self.webpackChunkandy_polhill=self.webpackChunkandy_polhill||[]).push([[853],{8378:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var a=n(7294),r=n(6725),l=n(3806),m=n(9329);function o(e){var t=e.children;return a.createElement("div",{className:"post-module--post--7qTb0"},t)}var c=n(5785),u="comments-module--comment__date--P+qfP",s=function(e){var t=e.author,n=e.body,r=e.date,l=e.pending,m=e.url;return a.createElement("li",{role:"comment","data-author":t,className:"comments-module--comment--sCTJa"},a.createElement("h4",{className:"comments-module--comment__title--TT06f"},l&&a.createElement("span",{alt:"Pending"},"‚è±"),m&&a.createElement(a.Fragment,null,a.createElement("a",{href:m},t),a.createElement("small",{className:u},r)),!m&&a.createElement(a.Fragment,null,t,a.createElement("small",{className:u},r))),a.createElement("p",null,n))};function i(e,t,n,a,r,l,m){try{var o=e[l](m),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(a,r)}var d=n(7757),h=n.n(d);function p(e){var t=e.children;return a.createElement("p",{className:"alert-module--alert--rKXHh",role:"alert"},t)}var f="commentForm-module--commentForm__label--Hu-Ti",E="commentForm-module--commentForm__input--JnGeF";function v(e){var t=e.discussionId,n=e.addComment,r=(0,a.useState)(""),l=r[0],m=r[1],o=(0,a.useState)(""),c=o[0],u=o[1],s=(0,a.useState)(""),d=s[0],v=s[1],b=(0,a.useState)(""),y=b[0],g=b[1],N=function(){var e,a=(e=h().mark((function e(a){var r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),g(null),e.prev=2,e.next=5,fetch("https://europe-west2-andypolhill.cloudfunctions.net/receive_comment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({body:l,discussionId:t,author:c,url:d})});case 5:return r=e.sent,e.next=8,r.json();case 8:if(o=e.sent,r.ok){e.next=11;break}throw o.message;case 11:m(""),u(""),v(""),plausible("comment"),n({body:l,author:c,url:d,pending:!0}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),g(e.t0);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function m(e){i(l,a,r,m,o,"next",e)}function o(e){i(l,a,r,m,o,"throw",e)}m(void 0)}))});return function(e){return a.apply(this,arguments)}}();return a.createElement("form",{onSubmit:N,className:"commentForm-module--commentForm--PR96M"},a.createElement("label",{className:f},"Name",a.createElement("input",{type:"text",value:c,className:E,onChange:function(e){return u(e.target.value)},size:40,maxLength:50})),a.createElement("label",{className:f},"Link (optional)",a.createElement("input",{type:"text",value:d,className:E,onChange:function(e){return v(e.target.value)},placeholder:"https://",size:40,maxLength:50})),a.createElement("label",{className:f},"Body",a.createElement("textarea",{value:l,className:"commentForm-module--commentForm__textarea--D9fdt",onChange:function(e){return m(e.target.value)},maxLength:500})),y&&a.createElement(p,null,y),a.createElement("button",null,"Post comment"))}var b=function(e){var t=e.comments,n=e.discussionId,r=(0,a.useState)(t),l=r[0],m=r[1];return a.createElement("section",{className:"comments-module--comments--EX9Eh"},a.createElement("h3",null,"Comments"),a.createElement("ul",{className:"comments-module--comments__list--z3n70"},l.map((function(e,t){var n=e.author,r=e.body,l=e.date,m=e.pending,o=e.url;return a.createElement(s,{author:n,key:t,body:r,date:l,pending:m,url:o})}))),a.createElement(v,{addComment:function(e){m([].concat((0,c.Z)(l),[e]))},discussionId:n}))};function y(e){var t=e.data.mdx,n=t.body,c=t.comments,u=t.frontmatter,s=u.discussionId;return a.createElement(l.Z,null,a.createElement(m.Z,null),a.createElement(o,null,a.createElement("h1",null,u.title),a.createElement("small",null,u.date),a.createElement(r.MDXRenderer,null,n)),a.createElement(b,{comments:c,discussionId:s}))}}}]);
//# sourceMappingURL=component---src-pages-blog-mdx-slug-js-193d34108ee89ccf8e51.js.map